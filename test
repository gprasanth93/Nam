const fetch = require('node-fetch');

const SERVER_URL = 'http://localhost:3000/events';

// Function to connect to SSE server and listen for events
async function listenToEvents() {
  const eventSource = new EventSource(SERVER_URL);

  eventSource.onmessage = (event) => {
    const data = JSON.parse(event.data);
    console.log(data.time);
  };

  eventSource.onerror = (error) => {
    console.error('EventSource failed:', error);
  };
}

// Start listening to events
listenToEvents();

// Example of making other API calls to the server
async function fetchDataFromServer() {
  try {
    const response = await fetch('http://localhost:3000/api/data');
    const data = await response.json();
    console.log('Data from server:', data);
  } catch (error) {
    console.error('Error fetching data:', error.message);
  }
}

// Call the function to fetch data from the server
fetchDataFromServer();